# Generated by Mirage (Thu, 4 Sep 2014 21:54:51 GMT).

LIBS   = -pkgs lwt.syntax,mirage-console-xen,mirage-types.lwt,shared-memory-ring.xenstore,xenstore,xenstored
PKGS   = mirage-console-xen mirage-xen
SYNTAX = -tags "syntax(camlp4o),annot,bin_annot,strict_sequence,principal"

FLAGS  = -cflag -g -lflags -g,-linkpkg,-dontlink,unix

BUILD  = ocamlbuild -classic-display -use-ocamlfind $(LIBS) $(SYNTAX) $(FLAGS)
OPAM   = opam

export OPAMVERBOSE=1
export OPAMYES=1

.PHONY: all depend clean build main.native
all: build

depend:
	$(OPAM) install $(PKGS) --verbose

main.native:
	$(BUILD) main.native

main.native.o:
	$(BUILD) main.native.o

build: main.native.o
	ld -d -nostdlib -m elf_x86_64 -T /home/jamesjb/.opam/4.01.0/lib/mirage-xen/mirage-x86_64.lds /home/jamesjb/.opam/4.01.0/lib/mirage-xen/x86_64.o \
	  _build/main.native.o /home/jamesjb/.opam/4.01.0/lib/mirage-xen/libocaml.a /home/jamesjb/.opam/4.01.0/lib/mirage-xen/libxen.a \
	  /home/jamesjb/.opam/4.01.0/lib/mirage-xen/libxencaml.a /home/jamesjb/.opam/4.01.0/lib/mirage-xen/libdiet.a /home/jamesjb/.opam/4.01.0/lib/mirage-xen/libm.a /home/jamesjb/.opam/4.01.0/lib/mirage-xen/longjmp.o -o mir-console.xen

run: build
	@echo console.xl has been created. Edit it to add VIFs or VBDs
	@echo Then do something similar to: xl create -c console.xl

clean:
	ocamlbuild -clean
